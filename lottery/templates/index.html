{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Mainslott Replica</title>
  <!-- <link rel="stylesheet" href="{% static 'style.css' %}"> -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <style>
  body, h1, h2, h3, h4, h5, h6, td, span, label, input, select, button {
    font-family: "Times New Roman", serif !important;
  }
</style>
<style>
  @media (max-width: 576px) {
  .lottery-table td {
    font-size: 20px !important;
  }

  .headgrid .title h1,
  .time,
  .next-draw {
    font-size: 22px !important;
  }

  span {
    font-size: 22px !important;
  }
}
</style>
<style>
  .container,
  .container-fluid,
  .container-lg,
  .container-md,
  .container-sm,
  .container-xl,
  .container-xxl {
    padding-left: 0 !important;
    padding-right: 0 !important;
  }
</style>
  <style>  
  html, body {
    height: 100%;
    margin: 0;
    display: flex;
    flex-direction: column;
  }
  header {
    background-color: #f2f2f2;
    text-align: center;
  }
    .wrapper {
        flex: 1;
    }
  
  footer {
    /* position: fixed; */
    bottom: 0;
    width: 100%;
    background-color: #f2f2f2;
    text-align: center;
    /* padding: 1em; */
  }

  .header-container {
    width: 100%;
    background-color: #FFA7DC;
    background-image: linear-gradient(to bottom right, #c494d8);
    font-family: "Times New Roman", serif;
    padding: 10px 4%;
    box-sizing: border-box;
    font-size: 32px;
    text-align: center;
  }
  
  .headgrid {
    font-size: 32px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    flex-wrap: wrap;
    text-align: center;
    /* margin-bottom: 40px; */
  }
  
  .headgrid .title h1 {
    font-size: 50px;
    margin: 0;
  }
  
  .headgrid .time,
  .headgrid .next-draw {
    font-size: 24px;
  }
  
  .time-selection form {
    display: flex;
    flex-wrap: wrap;
    gap: 25px;
    align-items: center;
    justify-content: center;
    /* margin-bottom: 30px; */
  }
  
  .time-selection label,
  .time-selection input,
  .time-selection select,
  .time-selection button {
    font-size: 16px;
  }
  
  @media (max-width: 768px) {
    .headgrid {
      flex-direction: column;
      gap: 10px;
    }
  
    .time-selection form {
      flex-direction: column;
      align-items: stretch;
    }
  
    .headgrid .title h1 {
      font-size: 36px;
    }
  
    .headgrid .time,
    .headgrid .next-draw {
      font-size: 20px;
    }
  }
  
.head {
    font-size: 32px;
    text-align: center;
    margin: 0px auto;
    background-color: #FFA7DC;
    background-image: linear-gradient(to bottom right, #c494d8);
    padding-left: 4%;
    padding-right: 4%;
    padding-bottom: 20px;
    font-family: "Times new Roman" !important;
}
.lottery-table td {
    padding: 10px;
    font-weight: bold;
    text-align: center;
    font-size: 18px;
}
td{
    text-align: -webkit-center;
    vertical-align: middle;
}
   </style>
</head>
<body>

<div class="wrapper container-fluid">
    <marquee behavior="" direction="" style="font-size: larger;">
        Note :- All the information here is based on Numeric astrology is not related to any type of gambling. Viewing this website is on your own risk. We are not responsible for any issue or scam. We respect all country rules and laws. If you not agree with our site, please quit our site right now..!!
    </marquee>
    <div class="header-container">
      <div class="headgrid">
        <div class="time" style="font-size: 32px;">Time: <span id="currentTime" >--:--:--</span></div>
        <div class="title"><strong style="font-size: 50px;font-weight: bolder;">MainsLott</strong></div>
        <div class="next-draw" style="font-size: 32px;">Next Draw : <span id="nextDraw">--:--:--</span>
          <input type="hidden" id="nextDrawTime" value="{{ next_draw_time_str }}">
        </div>
      </div>
      <section class="time-selection">
        <form method="post">
          {% csrf_token %}
          <label><strong style="font-size: 32px;float: left;">Select Date:</strong></label>
          <input type="date" name="date" value="{{ selected_date }}" style="padding-left: 10px;font-weight: bold;font-size: 20px;">
          <label><strong style="font-size: 32px;float: right;">Select Time:</strong></label>
          <select name="time" id="timeInput" style="padding-left: 10px; font-weight: bold; font-size: 20px;">
            <option value="">-- All Times --</option>
            {% for slot in time_slots %}
              <option value="{{ slot }}" {% if slot == selected_time %}selected{% endif %}>{{ slot }}</option>
            {% endfor %}
          </select>
          <button type="submit" class="btn btn-primary">Submit</button>
          <button type="button" class="btn btn-primary" onclick="location.reload();">Refresh</button>
          <div>
            <button type="button" class="btn btn-success" id="btnSingle">SINGLE</button>
            <button type="button" class="btn btn-success" id="btnTwo">TWO</button>
            <button type="button" class="btn btn-success" id="btnFull">FULL</button>
            <button type="button" class="btn btn-success" id="btnHistory">HISTORY</button>
            <button type="button" class="btn btn-success" id="btnResults">RESULTS</button>

            <input type="hidden" name="show_history" id="show_history_input" value="">
          </div>
        </form>
      </section>
    </div>
    <div>

    </div>
    <!-- {% if not show_history == "1" %}
    <div class="row pt-1" style="padding-left: 4%;padding-right: 4%;padding-top: 1px;">
      <div class="col-md-4 mb-2">
          <span style="font-size: 38px; font-weight: bold;">MainsLott</span>
      </div>
      <div class="col-md-4 mb-2" style="display:inline; text-align:right; margin-left: -8%;">
          <span class="time" style="font-size: 38px; text-align: center; font-weight: bold;">{{ current_slot_label }}</span>
      </div>
      <div class="col-md-4 mb-2" style="float:right; text-align:right; margin-left: 8%;">
          <span style="font-size: 38px; font-weight: bold;">{{ formatted_date }}</span>
      </div>
    </div>
    {% endif %} -->
    {% if show_history == "1" or show_history == "2" %}
    <div class="table-responsive">
      <table class="table table-bordered text-center" style="width: 100%;font-size:25px; font-weight:bold;">
        <thead>
          <tr>
            <th></th>
            {% for col in column_headers|slice:":10" %}
              <th>{{ col }}</th>
            {% endfor %}
          </tr>
        </thead>
        <tbody>
          {% for row in grid|slice:":10" %}
            <tr>
              <th>{{ forloop.counter0|stringformat:"02d" }}</th>
              {% for cell in row %}
                {% if forloop.counter0 == 0 %}
                  <td style="background-color:#FFEB3B; font-size:25px; font-weight:bold;" align="center">
                {% elif forloop.counter0 == 1 %}
                  <td style="background-color:#ecd4d8; font-size:25px; font-weight:bold;" align="center">
                {% elif forloop.counter0 == 2 %}
                  <td style="background-color:#85d825; font-size:25px; font-weight:bold;" align="center">
                {% elif forloop.counter0 == 3 %}
                  <td style="background-color:#ea8d9e; font-size:25px; font-weight:bold;" align="center">
                {% elif forloop.counter0 == 4 %}
                  <td style="background-color:#e3a0ef; font-size:25px; font-weight:bold;" align="center">
                {% elif forloop.counter0 == 5 %}
                  <td style="background-color:#d47c8c; font-size:25px; font-weight:bold;" align="center">
                {% elif forloop.counter0 == 6 %}
                  <td style="background-color:#ecd4d8; font-size:25px; font-weight:bold;" align="center">
                {% elif forloop.counter0 == 7 %}
                  <td style="background-color:#FFEB3B; font-size:25px; font-weight:bold;" align="center">
                {% elif forloop.counter0 == 8 %}
                  <td style="background-color:#5bbfec; font-size:25px; font-weight:bold;" align="center">
                {% elif forloop.counter0 == 9 %}
                  <td style="background-color:#ffa7dc; font-size:25px; font-weight:bold;" align="center">
                {% else %}
                  <td>
                {% endif %}
                  {{ cell|default:"--" }}
                  </td>
              {% endfor %}
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
    {% elif show_history == "4" %}
    <!-- history results -->
    <div id="historyTable" class="table-responsive">
      {% if history_data %}
        {% for slot, rows in history_data %}
          <h4 class="text-center mt-4" style="font-size: 38px; text-align: center; font-weight: bold; margin-top: 0.5rem !important;">{{ slot }}</h4>
          <table class="table table-bordered text-center" cellspacing="0" border="1" style="border-collapse:collapse;width:100%; margin:0 auto;">
            <tbody>
              {% for row in rows %}
                <tr>
                  {% for cell in row %}
                    {% if forloop.counter0 == 0 %}
                      <td style="background-color:#FFEB3B; font-size:25px; font-weight:bold;" align="center">
                    {% elif forloop.counter0 == 1 %}
                      <td style="background-color:#ecd4d8; font-size:25px; font-weight:bold;" align="center">
                    {% elif forloop.counter0 == 2 %}
                      <td style="background-color:#85d825; font-size:25px; font-weight:bold;" align="center">
                    {% elif forloop.counter0 == 3 %}
                      <td style="background-color:#ea8d9e; font-size:25px; font-weight:bold;" align="center">
                    {% elif forloop.counter0 == 4 %}
                      <td style="background-color:#e3a0ef; font-size:25px; font-weight:bold;" align="center">
                    {% elif forloop.counter0 == 5 %}
                      <td style="background-color:#d47c8c; font-size:25px; font-weight:bold;" align="center">
                    {% elif forloop.counter0 == 6 %}
                      <td style="background-color:#ecd4d8; font-size:25px; font-weight:bold;" align="center">
                    {% elif forloop.counter0 == 7 %}
                      <td style="background-color:#FFEB3B; font-size:25px; font-weight:bold;" align="center">
                    {% elif forloop.counter0 == 8 %}
                      <td style="background-color:#5bbfec; font-size:25px; font-weight:bold;" align="center">
                    {% elif forloop.counter0 == 9 %}
                      <td style="background-color:#ffa7dc; font-size:25px; font-weight:bold;" align="center">
                    {% else %}
                      <td>
                    {% endif %}
                      {{ cell.number|default:"--" }}
                    </td>
                  {% endfor %}
                </tr>
              {% endfor %}
            </tbody>
          </table>
        {% endfor %}
      {% endif %}
    </div>
    {% else %}
    <!-- Full table button -->
    <div id="fullTable" class="table-responsive">
      <table class="table table-bordered text-center" cellspacing="0" rules="all" border="1" id="GridView1" style="border-collapse:collapse;width:100%; margin:0 auto;">
        {% if results_exist %}
          {% for row in grid %}
            <tr>
              {% for cell in row %}
                {% if forloop.counter0 == 0 %}
                  <td style="background-color:#FFEB3B; font-size:25px; font-weight:bold;" align="center">{{ cell.number|default:"--" }}</td>
                {% elif forloop.counter0 == 1 %}
                  <td style="background-color:#ecd4d8; font-size:25px; font-weight:bold;" align="center">{{ cell.number|default:"--" }}</td>
                {% elif forloop.counter0 == 2 %}
                  <td style="background-color:#85d825; font-size:25px; font-weight:bold;" align="center">{{ cell.number|default:"--" }}</td>
                {% elif forloop.counter0 == 3 %}
                  <td style="background-color:#ea8d9e; font-size:25px; font-weight:bold;" align="center">{{ cell.number|default:"--" }}</td>
                {% elif forloop.counter0 == 4 %}
                  <td style="background-color:#e3a0ef; font-size:25px; font-weight:bold;" align="center">{{ cell.number|default:"--" }}</td>
                {% elif forloop.counter0 == 5 %}
                  <td style="background-color:#d47c8c; font-size:25px; font-weight:bold;" align="center">{{ cell.number|default:"--" }}</td>
                {% elif forloop.counter0 == 6 %}
                  <td style="background-color:#ecd4d8; font-size:25px; font-weight:bold;" align="center">{{ cell.number|default:"--" }}</td>
                {% elif forloop.counter0 == 7 %}
                  <td style="background-color:#FFEB3B; font-size:25px; font-weight:bold;" align="center">{{ cell.number|default:"--" }}</td>
                {% elif forloop.counter0 == 8 %}
                  <td style="background-color:#5bbfec; font-size:25px; font-weight:bold;" align="center">{{ cell.number|default:"--" }}</td>
                {% elif forloop.counter0 == 9 %}
                  <td style="background-color:#ffa7dc; font-size:25px; font-weight:bold;" align="center">{{ cell.number|default:"--" }}</td>
                {% endif %}
              {% endfor %}
            </tr>
          {% endfor %}
        {% else %}
          <tr>
            <td colspan="10" style="font-size: 26px; font-weight: bold; padding: 30px;">
              No Record Found...!
            </td>
          </tr>
        {% endif %}
      </table>
    </div>
    {% endif %}
</div>
<footer>
  <p>&copy; 2025 Mainslott.in</p>
</footer>
<script>
function updateTimes() {
    const now = new Date();
    const kolkataTime = new Date(now.toLocaleString("en-US", { timeZone: "Asia/Kolkata" }));

    // Format current time
    let hour = kolkataTime.getHours();
    const minute = kolkataTime.getMinutes();
    const second = kolkataTime.getSeconds();

    let hour12 = hour % 12;
    hour12 = hour12 === 0 ? 12 : hour12;

    const formattedHour = String(hour12).padStart(2, '0');
    const formattedMinute = String(minute).padStart(2, '0');
    const formattedSecond = String(second).padStart(2, '0');

    const formattedTime = `${formattedHour}:${formattedMinute}:${formattedSecond}`;
    document.getElementById("currentTime").textContent = formattedTime;

    // Countdown to next draw
    const nextDrawStr = document.getElementById("nextDrawTime").value;
    const nextDraw = new Date(nextDrawStr);
    const diff = nextDraw - kolkataTime;

    if (diff > 0) {
        const totalSeconds = Math.floor(diff / 1000);
        const hours = String(Math.floor(totalSeconds / 3600)).padStart(2, '0');
        const minutes = String(Math.floor((totalSeconds % 3600) / 60)).padStart(2, '0');
        const seconds = String(totalSeconds % 60).padStart(2, '0');

        document.getElementById("nextDraw").textContent = `${hours}:${minutes}:${seconds}`;
    } else {
        // document.getElementById("nextDraw").textContent = "00:00:00";
        // Optional: reload page after countdown ends
        location.reload();
    }
}
setInterval(updateTimes, 1000);
updateTimes();
</script>
<script>
  document.getElementById("btnSingle").onclick = function () {
    document.getElementById("show_history_input").value = "1";
    this.form.submit();
  };
  document.getElementById("btnTwo").onclick = function () {
    document.getElementById("show_history_input").value = "2";
    this.form.submit();
  };
  document.getElementById("btnFull").onclick = function () {
    document.getElementById("show_history_input").value = "3";
    this.form.submit();
  };
  document.getElementById("btnHistory").onclick = function () {
    document.getElementById("show_history_input").value = "4";
    this.form.submit();
  };
</script>

<!-- <script>
  window.addEventListener('load', () => {
    document.getElementById("historyTable").scrollIntoView({ behavior: "smooth" });
  });
</script> -->
</body>
</html>